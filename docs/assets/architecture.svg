<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1400" height="820" viewBox="0 0 1400 820">
  <defs>
    <style>
      .title { font: 700 28px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial; fill: #111827; }
      .subtitle { font: 600 18px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial; fill: #111827; }
      .text { font: 500 14px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial; fill: #111827; }
      .muted { font: 500 13px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial; fill: #374151; }
      .box { fill: #ffffff; stroke: #111827; stroke-width: 1.5; rx: 14; }
      .box2 { fill: #f8fafc; stroke: #111827; stroke-width: 1.5; rx: 14; }
      .box3 { fill: #eff6ff; stroke: #111827; stroke-width: 1.5; rx: 14; }
      .arrow { stroke: #111827; stroke-width: 2; fill: none; marker-end: url(#arrowHead); }
      .dash { stroke: #6b7280; stroke-width: 2; fill: none; stroke-dasharray: 6 6; marker-end: url(#arrowHeadMuted); }
    </style>
    <marker id="arrowHead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L9,3 L0,6 Z" fill="#111827"/>
    </marker>
    <marker id="arrowHeadMuted" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L9,3 L0,6 Z" fill="#6b7280"/>
    </marker>
  </defs>

  <rect x="0" y="0" width="1400" height="820" fill="#ffffff"/>
  <text x="40" y="60" class="title">Nativa Architecture (high-level)</text>
  <text x="40" y="92" class="muted">Native-first query execution + governance-scoped multi-tenant support</text>

  <!-- Left: Inputs -->
  <rect x="60" y="150" width="260" height="80" class="box"/>
  <text x="190" y="185" text-anchor="middle" class="subtitle">Client</text>
  <text x="190" y="210" text-anchor="middle" class="muted">REST / Java</text>

  <rect x="60" y="270" width="260" height="110" class="box2"/>
  <text x="190" y="305" text-anchor="middle" class="subtitle">Query</text>
  <text x="190" y="332" text-anchor="middle" class="muted">JSON/YAML or Java DSL</text>
  <text x="190" y="356" text-anchor="middle" class="muted">filter/sort/page/params</text>

  <rect x="60" y="410" width="260" height="120" class="box2"/>
  <text x="190" y="445" text-anchor="middle" class="subtitle">Authoring</text>
  <text x="190" y="472" text-anchor="middle" class="muted">YAML entities + views</text>
  <text x="190" y="496" text-anchor="middle" class="muted">mapping + sqlView</text>

  <rect x="60" y="560" width="260" height="120" class="box3"/>
  <text x="190" y="595" text-anchor="middle" class="subtitle">GovernanceContext</text>
  <text x="190" y="622" text-anchor="middle" class="muted">tenant boundary keys</text>
  <text x="190" y="646" text-anchor="middle" class="muted">governanceKey values</text>

  <!-- Middle: Runtime -->
  <rect x="420" y="180" width="320" height="110" class="box"/>
  <text x="580" y="215" text-anchor="middle" class="subtitle">Governance.inContext</text>
  <text x="580" y="242" text-anchor="middle" class="muted">binds context to scope</text>
  <text x="580" y="266" text-anchor="middle" class="muted">(ScopedValue)</text>

  <rect x="420" y="330" width="320" height="140" class="box3"/>
  <text x="580" y="365" text-anchor="middle" class="subtitle">GovernedDataEngine</text>
  <text x="580" y="392" text-anchor="middle" class="muted">inject tenant filters</text>
  <text x="580" y="416" text-anchor="middle" class="muted">populate governed fields</text>
  <text x="580" y="440" text-anchor="middle" class="muted">shared vs isolated store</text>

  <rect x="420" y="510" width="320" height="120" class="box"/>
  <text x="580" y="545" text-anchor="middle" class="subtitle">DataEngine</text>
  <text x="580" y="572" text-anchor="middle" class="muted">normalize + validate query</text>
  <text x="580" y="596" text-anchor="middle" class="muted">plan DML or merge SELECT</text>

  <!-- Right: Backend pipeline -->
  <rect x="840" y="170" width="500" height="520" class="box2"/>
  <text x="1090" y="208" text-anchor="middle" class="subtitle">Backend-native execution</text>

  <rect x="890" y="240" width="400" height="80" class="box"/>
  <text x="1090" y="272" text-anchor="middle" class="subtitle">Dialect</text>
  <text x="1090" y="298" text-anchor="middle" class="muted">renders native SQL/BSON</text>

  <rect x="890" y="350" width="400" height="90" class="box"/>
  <text x="1090" y="382" text-anchor="middle" class="subtitle">NativeStatement</text>
  <text x="1090" y="408" text-anchor="middle" class="muted">SQL + binds OR filter/pipeline</text>

  <rect x="890" y="470" width="400" height="90" class="box"/>
  <text x="1090" y="502" text-anchor="middle" class="subtitle">EngineHandle</text>
  <text x="1090" y="528" text-anchor="middle" class="muted">DataSource / MongoClient</text>

  <rect x="890" y="590" width="190" height="80" class="box3"/>
  <text x="985" y="622" text-anchor="middle" class="subtitle">JDBC</text>
  <text x="985" y="648" text-anchor="middle" class="muted">native SQL</text>

  <rect x="1100" y="590" width="190" height="80" class="box3"/>
  <text x="1195" y="622" text-anchor="middle" class="subtitle">Mongo</text>
  <text x="1195" y="648" text-anchor="middle" class="muted">native BSON</text>

  <!-- Arrows -->
  <path class="arrow" d="M320,190 L420,235"/>
  <path class="arrow" d="M320,325 L420,395"/>
  <path class="arrow" d="M320,470 L420,570"/>
  <path class="arrow" d="M320,620 L420,235"/>

  <path class="arrow" d="M740,400 L840,280"/>
  <path class="arrow" d="M740,570 L890,570"/>

  <path class="arrow" d="M1090,320 L1090,350"/>
  <path class="arrow" d="M1090,440 L1090,470"/>
  <path class="arrow" d="M1090,560 L985,590"/>
  <path class="arrow" d="M1090,560 L1195,590"/>

  <!-- Legend -->
  <text x="60" y="745" class="subtitle">Legend</text>
  <rect x="60" y="760" width="18" height="18" class="box"/>
  <text x="88" y="774" class="text">Core runtime</text>
  <rect x="210" y="760" width="18" height="18" class="box2"/>
  <text x="238" y="774" class="text">Inputs / authored config</text>
  <rect x="440" y="760" width="18" height="18" class="box3"/>
  <text x="468" y="774" class="text">Governance-related</text>
</svg>


